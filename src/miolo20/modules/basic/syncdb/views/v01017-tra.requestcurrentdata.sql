CREATE OR REPLACE VIEW tra.requestcurrentdata AS
    SELECT COALESCE(b.username, a.username) AS username, COALESCE(b.datetime, a.datetime) AS datetime, COALESCE(b.ipaddress, a.ipaddress) AS ipaddress, a.requestid, COALESCE(b.unitareaid, a.unitareaid) AS unitareaid, a.trainingtypeid, a.personid, COALESCE(b.begindate, a.begindate) AS begindate, COALESCE(b.enddate, a.enddate) AS enddate, COALESCE(b.institution, a.institution) AS institution, COALESCE(b.semester, a.semester) AS semester, COALESCE(b.courseid, a.courseid) AS courseid, a.observation AS requestobservation, a.status, a.desistencedate, COALESCE(b.supervisor, a.supervisor) AS supervisor, b.observation AS adjustmentobservation, b.agreementid, COALESCE(b.observation, a.observation) AS observation, COALESCE(b.place, a.place) AS place, a.requestdate, a.addendumcourseadminid FROM (tra.request a LEFT JOIN tra.requestadjustment b ON ((b.requestid = a.requestid)));

