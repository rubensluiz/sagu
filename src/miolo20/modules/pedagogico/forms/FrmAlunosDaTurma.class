<?php

class FrmAlunosDaTurma extends SForm
{
    
    public function __construct($title, $object, $pkey)
    {
        parent::__construct(_M('Alunos da turma'));
    }


    public function defineFields()
    {
        $MIOLO = MIOLO::getInstance();
        $module = MIOLO::getCurrentModule();
        
        $MIOLO->uses('types/AcpTurmasEncerradas.class', $module);
        $MIOLO->uses('grids/GrdAlunosDaTurma.class', $module);
        
        $acpTurmasEncerradas = new AcpTurmasEncerradas();
        
        parent::defineFields(array(
            'toolbar' => false
        ));
        
        $data = $acpTurmasEncerradas->searchAlunosDaTurma(MIOLO::_REQUEST('ofertaturmaid'));
        
        $fields[] = $grid = new GrdAlunosDaTurma();
        $grid->setData($data);
        
        $image = 'images/button_finalize.png';
        $btn = new MButton('btnSaveAndFinish', _M('Fechar'), $MIOLO->GetActionURL($module, 'main:process:turmasencerradas', null, array('ofertacursoid' => MIOLO::_REQUEST('ofertacursoid'))), $image);

        $fields[] = new MSeparator();
        $fields[] = new MDiv(null, array($btn), null, 'align="center"');
        
        $this->SetFields($fields);
    }
    
    
}

?>
