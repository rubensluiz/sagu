<?php
class MState
{
    var $stateVars;
    var $viewState = '';

    function __construct()
    {
        $this->stateVars = array
            (
            );

        $this->viewState = '';
    }

    function set($var, $value, $component_name = '')
    {

        if (!$component_name)
        {
          $this->stateVars[$var] = $value;
        }
        else
        {
          $this->stateVars[$component_name][$var] = $value;
        }
    }

    function get($var, $component_name = '')
    {

        if (!$component_name)
        {
          return $this->stateVars[$var];
        }
        else
        {
          return $this->stateVars[$component_name][$var];
        }
    }

    function LoadViewState()
    {
        $this->viewState = $_POST['__VIEWSTATE'];

        if ($this->viewState)
        {
            $s = base64_decode($this->viewState);
            $this->stateVars = unserialize($s);
        }
    }

    function SaveViewState()
    {
        if ($this->stateVars)
        {
            $s = serialize($this->stateVars);
            $this->viewState = base64_encode($s);
        }
    }

    function GetViewState()
    {
        return $this->viewState;
    }
}
?>