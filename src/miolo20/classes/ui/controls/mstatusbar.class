<?php
// +-----------------------------------------------------------------+
// | MIOLO - Miolo Development Team - UNIVATES Centro Universitário  |
// +-----------------------------------------------------------------+
// | CopyLeft (L) 2001-2002 UNIVATES, Lajeado/RS - Brasil            |
// +-----------------------------------------------------------------+
// | Licensed under GPL: see COPYING.TXT or FSF at www.fsf.org for   |
// |                     further details                             |
// |                                                                 |
// | Site: http://miolo.codigolivre.org.br                           |
// | E-mail: vgartner@univates.br                                    |
// |         ts@interact2000.com.br                                  |
// +-----------------------------------------------------------------+
// | Abstract: This file contains the statusbar elements definitions |
// |                                                                 |
// | Created: 2001/08/14 Vilson Cristiano Gärtner,                   |
// |                     Thomas Spriestersbach                       |
// |                                                                 |
// | History: Initial Revision                                       |
// +-----------------------------------------------------------------+

class MStatusBar extends MControl
{
    var $cols;

    function __construct($cols = null)
    {
        parent::__construct();
        $this->AddStyleFile('m_themeelement.css');
        $this->cols = $cols;

        $login = $this->manager->GetLogin();

        if ($login)
        {
            $online = (time() - $login->time) / 60;
            $this->AddInfo('Usuário:' . ' ' . $login->id);
            $this->AddInfo('Entrada às:' . ' ' . Date('H:i', $login->time) . ' (' . sprintf('%02d:%02d', $online / 60, $online % 60) . ')');
            $this->AddInfo('Data:' . ' ' . Date('d/m/Y', $login->time));
        }
        else
        {
            $this->AddInfo('Usuário: -');
            $this->AddInfo('Entrada às: --:--');
            $this->AddInfo('Data: --/--/----');
        }

        $this->AddInfo(MIOLO_VERSION);
        $this->AddInfo(MIOLO_AUTHOR);
    }

    function AddInfo($info)
    {
        $this->cols[] = $info;
    }

    function Clear()
    {
        unset($this->cols);
    }

    function Generate()
    {
        $ul = new MUnOrderedList();
        $ul->AddOptions($this->cols);
        $div = new MDiv('', $ul, 'm-statusbar');
        return $div->Generate();
    }
}

?>
