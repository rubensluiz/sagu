<?php
/**
 * Brief Class Description.
 * Complete Class Description.
 */
class MHandler
{
    /**
     * Attribute Description.
     */
    protected $manager;

    /**
     * Attribute Description.
     */
    protected $module;

    /**
     * Attribute Description.
     */
    protected $path;

    /**
     * Attribute Description.
     */
    protected $theme;

    /**
     * Brief Description.
     * Complete Description.
     *
     * @param $manager (tipo) desc
     * @param $module (tipo) desc
     *
     * @returns (tipo) desc
     *
     */
    function __construct($manager, $module)
    {
        $this->manager = $manager;
        $this->module = $module;
        $this->path = $this->manager->getConf('home.modules') . '/' . $module . '/handlers/';
    }

    /**
     * Brief Description.
     * Complete Description.
     *
     * @returns (tipo) desc
     *
     */
    function init()
    {
    }

    /**
     * Brief Description.
     * Complete Description.
     *
     * @param $handler (tipo) desc
     *
     * @returns (tipo) desc
     *
     */
    function dispatch($handler)
    {
        global $context, $module, $action, $item, $session, $page, $auth, $perms, $navbar, $theme, $history, $self, $url;

        $MIOLO = $this->manager;
        $context = $this->manager->context;
        $module = $context->module;
        $action = $context->action;
        $self = $context->action;
        $item = $context->GetVar('item');
        $session = $this->manager->session;
        $page = $this->manager->page;
        $url = $this->manager->GetCurrentURL();
        $theme = $this->manager->theme;
        $auth = $this->manager->auth;
        $perms = $this->manager->perms;
        $navbar = $theme->GetElement('navigation');
        $history = $this->manager->history;

        $this->manager->Trace("Handler:dispatch: $handler");

        $file = $this->path . $handler . '.inc';

        if ( $return = file_exists($file) )
        {
            include ($file);
        }

        return $return;
    }
}
?>