<?php

class DeleteCriteria extends PersistentCriteria
{
    private $transaction;

    public function __construct($classMap, $manager)
    {
        parent::__construct($classMap, $manager);
        $this->transaction = NULL;
    }

    function getSqlStatement()
    {
        $statement = new MSQL();
        $statement->SetTables($this->classMap->getDeleteSql());

        // Add 'WHERE' clause to the select statement
        if (($whereCondition = $this->whereCondition->getSql()) != '')
        {
            $statement->SetWhere($whereCondition);
        }
        return $statement;
    }

    public function setTransaction($transaction)
    {
        $this->transaction = $transaction;
    }

    public function getTransaction()
    {
        return $this->transaction;
    }

    public function delete($parameters = null)
    {
        return $this->manager->processCriteriaDelete($this, $parameters);
    }
}
?>