<?xml version="1.0" encoding="UTF-8"?>
<dbchanges>
    <!--
        Document   : changes.xml
        Created on : 3 de Maio de 2013, 14:07
        Author     : ftomasini
        Description:
            Purpose of the document follows.
    -->
    <locate>change</locate>
    <locate>applicationversion</locate>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basphone
	DROP CONSTRAINT basphone_pkey;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basdocument
	DROP CONSTRAINT basdocument_documenttypeid;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basperson
	DROP CONSTRAINT gtc_basperson_persongroup;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basperson
	DROP CONSTRAINT gtc_basperson_sex;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
DROP INDEX index_gtcloan_itemnumber_returndate;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>  
    <item>
        <change>
            <![CDATA[
DROP INDEX index_gtcloan_libraryunitid;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item> 
    <item>
        <change>
            <![CDATA[
DROP TABLE baspersonoperationprocess;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcdomain RENAME TO basdomain;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_cityid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_documenttypeid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_locationtypeid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_phoneid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE basphone_phoneid_seq
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_materialevaluationid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_mylibraryid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_workflowhistoryid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_workflowinstanceid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE SEQUENCE seq_workflowstatusid
	START WITH 1
	INCREMENT BY 1
	NO MAXVALUE
	NO MINVALUE
	CACHE 1;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE baslog (
	username character varying(20) DEFAULT "current_user"(),
	datetime timestamp with time zone DEFAULT now(),
	ipaddress inet
);
COMMENT ON TABLE baslog IS 'Registro de acessos e modificações aos registros.';
COMMENT ON COLUMN baslog.username IS 'nome do usuário';
COMMENT ON COLUMN baslog.datetime IS 'Data do registo';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE bascity (
	cityid integer DEFAULT nextval('seq_cityid'::regclass) NOT NULL,
	name text NOT NULL,
	zipcode character varying(9),
	stateid character varying(2) NOT NULL,
	countryid character varying(3) NOT NULL,
	ibgeid integer
)
INHERITS (baslog);

ALTER TABLE ONLY bascity
	ALTER COLUMN username SET DEFAULT "current_user"();

ALTER TABLE ONLY bascity
	ALTER COLUMN datetime SET DEFAULT now();

COMMENT ON TABLE bascity IS 'Cidade';
COMMENT ON COLUMN bascity.cityid IS 'Código da cidade';
COMMENT ON COLUMN bascity.name IS 'Nome da cidade.';
COMMENT ON COLUMN bascity.zipcode IS 'CEP - Código de Endereçamento Postal';
COMMENT ON COLUMN bascity.stateid IS 'Código do estado.';
COMMENT ON COLUMN bascity.countryid IS 'código do pais';
COMMENT ON COLUMN bascity.ibgeid IS 'Código do ibge';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE bascountry (
	countryid character varying(3) NOT NULL,
	name character varying(50) NOT NULL,
	nationality character varying(30) NOT NULL,
	currency character varying(20),
	pluralcurrency character varying(20),
	decimaldescription character varying(20),
	pluraldecimaldescription character varying(20),
	currencysymbol character varying(20)
)
INHERITS (baslog);

ALTER TABLE ONLY bascountry
	ALTER COLUMN username SET DEFAULT "current_user"();

ALTER TABLE ONLY bascountry
	ALTER COLUMN datetime SET DEFAULT now();

COMMENT ON TABLE bascountry IS 'País';
COMMENT ON COLUMN bascountry.countryid IS 'Código do país';
COMMENT ON COLUMN bascountry.name IS 'nome';
COMMENT ON COLUMN bascountry.nationality IS 'nacionalidade';
COMMENT ON COLUMN bascountry.currency IS 'Moeda Ex. Real';
COMMENT ON COLUMN bascountry.pluralcurrency IS 'moeda no plural (Ex. Reais)';
COMMENT ON COLUMN bascountry.decimaldescription IS 'Descrição decimal (Ex. centavo)';
COMMENT ON COLUMN bascountry.pluraldecimaldescription IS 'Descrição decimal no plural (Ex. centavos)';
COMMENT ON COLUMN bascountry.currencysymbol IS 'Simbolo da moeda Ex. R$';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON COLUMN basdocumenttype.sex IS 'sexo que deve ter este documento.';
COMMENT ON COLUMN basdocumenttype.minage IS 'idade mínima';
COMMENT ON COLUMN basdocumenttype.maxage IS 'idade máxima';
COMMENT ON COLUMN basdocumenttype.needdeliver IS 'precisa de entrega';
COMMENT ON COLUMN basdocumenttype.isblockenroll IS 'bloqueia matricula';
COMMENT ON COLUMN basdocumenttype.fillhint IS 'dica de preenchimento';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE baslocationtype (
	locationtypeid integer DEFAULT nextval('seq_locationtypeid'::regclass) NOT NULL,
	name character varying(30) NOT NULL
);

COMMENT ON TABLE baslocationtype IS 'tipo de Local';
COMMENT ON COLUMN baslocationtype.locationtypeid IS 'código do tipo de locação';
COMMENT ON COLUMN baslocationtype.name IS 'nome do tipo do locação';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE basstate (
	stateid character varying(2) NOT NULL,
	countryid character varying(3) NOT NULL,
	name character varying(50) NOT NULL,
	ibgeid integer
)
INHERITS (baslog);

ALTER TABLE ONLY basstate
	ALTER COLUMN username SET DEFAULT "current_user"();

ALTER TABLE ONLY basstate
	ALTER COLUMN datetime SET DEFAULT now();

COMMENT ON TABLE basstate IS 'estado';
COMMENT ON COLUMN basstate.stateid IS 'código do estado';
COMMENT ON COLUMN basstate.countryid IS 'código do país';
COMMENT ON COLUMN basstate.name IS 'nome do estado';
COMMENT ON COLUMN basstate.ibgeid IS 'código do ibge';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtclibperson (
	personid bigint NOT NULL,
	baseldap character varying(50),
	sex character(1),
	profession character varying(100),
	workplace character varying(100),
	school character varying(100),
	datebirth date,
	persongroup character varying(255),
	operationprocess timestamp without time zone
);

COMMENT ON TABLE gtclibperson IS 'Informação da pessoa, relacionadas a biblioteca';
COMMENT ON COLUMN gtclibperson.personid IS 'código da pessoa';
COMMENT ON COLUMN gtclibperson.baseldap IS 'Determina a base ldap onde o login deve ser efetuado.';
COMMENT ON COLUMN gtclibperson.sex IS 'Sexo, valores válidos M e F.';
COMMENT ON COLUMN gtclibperson.profession IS 'Profissão';
COMMENT ON COLUMN gtclibperson.workplace IS 'Local de trabalho.';
COMMENT ON COLUMN gtclibperson.school IS 'Escola.';
COMMENT ON COLUMN gtclibperson.datebirth IS 'Data de nascimento.';
COMMENT ON COLUMN gtclibperson.persongroup IS 'Grupo da pessoa, utilizado para caracterizar uma pessoa em alguma situação, varia de acordo com o cliente.';
COMMENT ON COLUMN gtclibperson.operationprocess IS 'Processo de operação';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcmateriallocation (
	materiallocationid integer NOT NULL,
	name character varying(255),
	libraryunitid integer NOT NULL
);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcmateriallocationtag (
	materiallocationtagid integer NOT NULL,
	type character(1),
	fieldid integer,
	subfieldidid character(1),
	rule character(1),
	content text,
	gtcmateriallocatioid integer NOT NULL
);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basconfig
	ADD COLUMN username character varying(20) DEFAULT "current_user"(),
	ADD COLUMN datetime timestamp with time zone DEFAULT now(),
	ADD COLUMN ipaddress inet;

ALTER TABLE basconfig
	INHERIT baslog;

COMMENT ON TABLE basconfig IS 'configurações do sistema';

COMMENT ON COLUMN basconfig.moduleconfig IS 'Modulo do parâmetro';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE baslink
	ADD COLUMN username character varying(20) DEFAULT "current_user"(),
	ADD COLUMN datetime timestamp with time zone DEFAULT now(),
	ADD COLUMN ipaddress inet;

ALTER TABLE baslink
	INHERIT baslog;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basperson
	DROP COLUMN city,
	DROP COLUMN baseldap,
	DROP COLUMN persongroup,
	DROP COLUMN sex,
	DROP COLUMN datebirth,
	DROP COLUMN school,
	DROP COLUMN profession,
	DROP COLUMN workplace,
	DROP COLUMN observation,
	ADD COLUMN username character varying(20) DEFAULT "current_user"(),
	ADD COLUMN datetime timestamp with time zone DEFAULT now(),
	ADD COLUMN ipaddress inet,
	ADD COLUMN persondv integer,
	ADD COLUMN personmask integer,
	ADD COLUMN shortname character varying(30),
	ADD COLUMN cityid integer,
	ADD COLUMN emailalternative character varying(60),
	ADD COLUMN url text,
	ADD COLUMN datein date DEFAULT now(),
	ADD COLUMN isallowpersonaldata boolean DEFAULT true,
	ADD COLUMN locationtypeid integer,
	ADD COLUMN sentemail boolean,
	ADD COLUMN obs text,
	ADD COLUMN photoid integer,
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: basperson original: integer new: bigint */,
	ALTER COLUMN location TYPE text /* TYPE change - table: basperson original: character varying(100) new: text */;

ALTER TABLE basperson
	INHERIT baslog;

COMMENT ON TABLE basperson IS 'Pessoas';
COMMENT ON COLUMN basperson.login IS 'Campo com login do usuário.';
COMMENT ON COLUMN basperson.persondv IS 'Digito verificador da pessoa.';
COMMENT ON COLUMN basperson.personmask IS 'máscara da pessoa???';
COMMENT ON COLUMN basperson.shortname IS 'Apelido';
COMMENT ON COLUMN basperson.cityid IS 'Codigo da cidade';
COMMENT ON COLUMN basperson.emailalternative IS 'email alternativo';
COMMENT ON COLUMN basperson.url IS 'url de site, blog, facebook, etc.';
COMMENT ON COLUMN basperson.datein IS 'Data de criação/entrada do registro';
COMMENT ON COLUMN basperson.isallowpersonaldata IS 'é permitido mostrar informações pessoais?';
COMMENT ON COLUMN basperson.locationtypeid IS 'código do tipo de locação.';
COMMENT ON COLUMN basperson.sentemail IS 'se permite envio de emails';
COMMENT ON COLUMN basperson.obs IS 'Observações.';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE baslink
	ADD COLUMN username character varying(20) DEFAULT "current_user"(),
	ADD COLUMN datetime timestamp with time zone DEFAULT now(),
	ADD COLUMN ipaddress inet;

ALTER TABLE baslink
	INHERIT baslog;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basphone
	ADD COLUMN username character varying(20) DEFAULT "current_user"(),
	ADD COLUMN datetime timestamp with time zone DEFAULT now(),
	ADD COLUMN ipaddress inet,
	ADD COLUMN phoneid integer DEFAULT nextval('seq_phoneid'::regclass) NOT NULL,
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: basphone original: integer new: bigint */;

ALTER TABLE basphone
	INHERIT baslog;

COMMENT ON COLUMN basphone.personid IS 'código da pessoa';

COMMENT ON COLUMN basphone.phoneid IS 'Código do telefone';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcanalytics
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcanalytics original: integer new: bigint */;

COMMENT ON TABLE gtcanalytics IS 'Tabela que registra acessos (termos pesquisados e erros) ao sistemas.
Utilizada para estatísticas.';
COMMENT ON COLUMN gtcanalytics.analyticsid IS 'Código do registro.';
COMMENT ON COLUMN gtcanalytics.query IS 'A intrução do navegador.';
COMMENT ON COLUMN gtcanalytics."action" IS 'Ação do miolo.';
COMMENT ON COLUMN gtcanalytics.event IS 'Evento do miolo.';
COMMENT ON COLUMN gtcanalytics.libraryunitid IS 'Unidade de bibllioteca logada.';
COMMENT ON COLUMN gtcanalytics.operator IS 'Operador.';
COMMENT ON COLUMN gtcanalytics.personid IS 'Código da pessoa.';
COMMENT ON COLUMN gtcanalytics."time" IS 'Data e Hora de registro.';
COMMENT ON COLUMN gtcanalytics.ip IS 'Ip de acesso.';
COMMENT ON COLUMN gtcanalytics.browser IS 'Navegador.';
COMMENT ON COLUMN gtcanalytics.loglevel IS 'Nível de registro.';
COMMENT ON COLUMN gtcanalytics.accesstype IS 'Tipo de acesso.';
COMMENT ON COLUMN gtcanalytics.menu IS 'Título do menu.';
COMMENT ON COLUMN gtcanalytics.timespent IS 'Tempo dispendido.';
COMMENT ON TABLE gtccontrolfielddetail IS 'Registra forma padrão de montagem de campos de controle Marc. Ex.:000 e 008';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcemailcontrolnotifyaquisition
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcemailcontrolnotifyaquisition original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcexemplaryfuturestatusdefined
	ADD COLUMN cancelreserveemailobservation text;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcfavorite
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcfavorite original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcinterestsarea
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcinterestsarea original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtclibraryassociation
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE gtclibraryunit IS 'Unidade de biblioteca.';
COMMENT ON COLUMN gtclibraryunit.acceptpurchaserequest IS 'Determina se aceita ou não solicitação de compras.';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtclibraryunitaccess
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE gtclibraryunitconfig IS 'Configuracoes do sistema relativas a unidade de biblioteca.';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtclibraryunitisclosed
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcloan
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcloan original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcloanbetweenlibrary
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcloanbetweenlibrary original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmarctaglisting
	ALTER COLUMN description SET NOT NULL;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmaterial
	ADD COLUMN searchcontentforsearchmodule text;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmaterialcontrol
	ADD COLUMN lastchangeoperator character varying(255) DEFAULT 'gnuteca3'::character varying NOT NULL;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmaterialevaluation
	ALTER COLUMN materialevaluationid SET DEFAULT nextval('seq_materialevaluationid'::regclass),
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcmaterialevaluation original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmylibrary
	ALTER COLUMN mylibraryid SET DEFAULT nextval('seq_mylibraryid'::regclass),
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcmylibrary original: integer new: bigint */;

COMMENT ON COLUMN gtcmylibrary.mylibraryid IS 'Código da minha biblioteca';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcnewsaccess
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpenalty
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcpenalty original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpersonconfig
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcpersonconfig original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpersonlibraryunit
	DROP COLUMN bug_dia2sql_ignorar,
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcpersonlibraryunit original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpolicy
	ADD COLUMN momentaryfinevalue double precision;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpurchaserequest
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcpurchaserequest original: integer new: bigint */,
	ALTER COLUMN amount SET NOT NULL;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcrequestchangeexemplarystatus
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcrequestchangeexemplarystatus original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcrequestchangeexemplarystatusaccess
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcreserve
	ALTER COLUMN personid TYPE bigint /* TYPE change - table: gtcreserve original: integer new: bigint */;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcreturntype
	ADD COLUMN sendmailreturnreceipt boolean;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcscheduletasklog
	ALTER COLUMN status SET NOT NULL;

COMMENT ON TABLE gtcscheduletasklog IS 'Log de tarefas realizadas';

COMMENT ON COLUMN gtcscheduletasklog.status IS 'Estado deste log';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcsearchablefieldaccess
	DROP COLUMN bug_dia2sql_ignorar;

ALTER TABLE gtcsearchformataccess
	DROP COLUMN bug_dia2sql_ignorar;

ALTER TABLE gtcsearchformatcolumn
	DROP COLUMN bug_dia2sql_ignorar;

ALTER TABLE gtcsoapaccess
	DROP COLUMN bug_dia2sql_ignorar;

ALTER TABLE gtcsuppliertypeandlocation
	DROP COLUMN bug_dia2sql_ignorar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcworkflowhistory
	ALTER COLUMN workflowhistoryid SET DEFAULT nextval('seq_workflowhistoryid'::regclass);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcworkflowinstance
	ALTER COLUMN workflowinstanceid SET DEFAULT nextval('seq_workflowinstanceid'::regclass);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcworkflowstatus
	ALTER COLUMN workflowstatusid SET DEFAULT nextval('seq_workflowstatusid'::regclass);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE miolo_access
	ALTER COLUMN rights SET NOT NULL;

COMMENT ON TABLE miolo_access IS 'Registra os permissões por grupo';
COMMENT ON COLUMN miolo_access.idtransaction IS 'Código da transação';
COMMENT ON COLUMN miolo_access.idgroup IS 'Código do grupo';
COMMENT ON COLUMN miolo_access.rights IS 'Direitos, quanto maior mais poder';
COMMENT ON COLUMN miolo_access.validatefunction IS 'Função de validação';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE miolo_group IS 'Grupos de usuários/operadores';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE miolo_groupuser IS 'Relaciona usuários/operadores e grupos';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE miolo_module IS 'Módulos do miolo';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE miolo_transaction IS 'Descrimina as transações/permissões do sistema.';
COMMENT ON COLUMN miolo_transaction.idmodule IS 'Modulo ao qual a transação/permissão pertence.';
COMMENT ON COLUMN miolo_transaction."action" IS 'Ação (url) do miolo ao qual a transação está relacionada, utilizada para montagem do menu principal do sistema.';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
COMMENT ON TABLE miolo_user IS 'Usuários do miolo/operadores.';
COMMENT ON COLUMN miolo_user.iduser IS 'Código do usuário';
COMMENT ON COLUMN miolo_user.login IS 'usuário para autenticação';
COMMENT ON COLUMN miolo_user.name IS 'Nome completo do usuário';
COMMENT ON COLUMN miolo_user.nickname IS 'Apelido do usuário';
COMMENT ON COLUMN miolo_user.m_password IS 'Senha para autenticação';
COMMENT ON COLUMN miolo_user.confirm_hash IS 'Hash de confirmação de senha. ( Não utilizado pelo gnuteca)';
COMMENT ON COLUMN miolo_user.theme IS 'Tema escolhido pelo usuário (não utilizado pelo Gnuteca).';
COMMENT ON COLUMN miolo_user.idmodule IS 'Módulo ao qual o usuário pertence';
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER SEQUENCE basphone_phoneid_seq
	OWNED BY basphone.phoneid;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE bascity
	ADD CONSTRAINT bascity_pkey PRIMARY KEY (cityid);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE bascountry
	ADD CONSTRAINT bascountry_pkey PRIMARY KEY (countryid);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basdocumenttype
	ADD CONSTRAINT basdocumenttype_pkey PRIMARY KEY (documenttypeid);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE baslocationtype
	ADD CONSTRAINT baslocationtype_pkey PRIMARY KEY (locationtypeid);
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basphone
	ADD CONSTRAINT basphone_pkey PRIMARY KEY (phoneid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basstate
	ADD CONSTRAINT basstate_pkey PRIMARY KEY (stateid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtclibperson
	ADD CONSTRAINT gtclibperson_pkey PRIMARY KEY (personid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmateriallocation
	ADD CONSTRAINT gtcmateriallocation_pkey PRIMARY KEY (materiallocationid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmateriallocationtag
	ADD CONSTRAINT gtcmateriallocationtag_pkey PRIMARY KEY (materiallocationtagid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE bascity
	ADD CONSTRAINT bascity_countryid_fkey FOREIGN KEY (countryid) REFERENCES bascountry(countryid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE bascity
	ADD CONSTRAINT bascity_stateid_fkey FOREIGN KEY (stateid) REFERENCES basstate(stateid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE bascountry
	ADD CONSTRAINT bascountry_countryid_key UNIQUE (countryid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basperson
	ADD CONSTRAINT basperson_email_key UNIQUE (email);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE basstate
	ADD CONSTRAINT basstate_countryid_fkey FOREIGN KEY (countryid) REFERENCES bascountry(countryid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtclibperson
	ADD CONSTRAINT gtclibperson_personid_fkey FOREIGN KEY (personid) REFERENCES basperson(personid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmateriallocation
	ADD CONSTRAINT libraryunitfk FOREIGN KEY (libraryunitid) REFERENCES gtclibraryunit(libraryunitid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcmateriallocationtag
	ADD CONSTRAINT materiallocationfk FOREIGN KEY (gtcmateriallocatioid) REFERENCES gtcmateriallocation(materiallocationid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcpurchaserequestquotation
	ADD CONSTRAINT gtcpurchaserequestquotation_supplierid_fkey FOREIGN KEY (supplierid) REFERENCES gtcsupplier(supplierid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE miolo_user
	ADD CONSTRAINT miolo_user_login_key UNIQUE (login);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE INDEX index_gtcloan_itemnumber_returndate ON gtcloan USING btree (itemnumber);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE INDEX index_gtcloan_libraryunitid ON gtcloan USING btree (libraryunitid);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE INDEX index_gtcmaterialhsitory_controlnumber ON gtcmaterialhistory USING btree (controlnumber);

            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
   <item>
        <change>
            <![CDATA[
  ALTER TABLE basdocument 
  DROP COLUMN observation,
  ADD COLUMN obs text,
  ADD COLUMN cityid integer,
  ADD COLUMN isexcused boolean,
  ADD COLUMN isdelivered boolean;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         ALTER TABLE basperson add column login varchar;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
         ALTER TABLE basperson add column obs text;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         update basperson set login = miolousername;
            ]]>
        </change>
        <applicationversion>3533</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
     <![CDATA[   
    CREATE OR REPLACE FUNCTION preparetopographicindexsearch(content character varying, complement character varying) RETURNS character varying
    LANGUAGE plpgsql
    AS $_$
DECLARE
    result varchar;
    resultAux varchar;
    number integer;
    content_v varchar;

    count int;
    new_content varchar;
    letter char;
BEGIN
    --tira acentos e converte pra minusculas e adiciona | como terminador de string.
    result := lower ( unaccent ( trim( content ) ) );

    -- Separa somente números
    new_content := '';
    count := 0;
    number := 0;

    WHILE (count < char_length(content))
    LOOP
        -- Obtém caractere.
        letter := substring(content, count+1, 1);

        -- Testa se caractere é numérico.
        IF letter ~ '^[0-9]$' AND char_length(new_content) < 9
        THEN
            new_content := new_content || letter;
        ELSE
            IF char_length(new_content) > 0
            THEN
                 number := new_content::integer;
                EXIT;
            END IF;
        END IF;

        count = count + 1;
    END LOOP;

    content_v := substring(content from position(number::text in content));

    /**
        Exemplo de precedência que deve ser levado em conta, vide #12268 :
        658.012.4+657 -> + vem primeiro
        658.012.4/.5 -> / vem segundo
        658.012.4 -> Numeros inteiros em terceiro
        658.012.4:266 -> : depois dos números inteiros
    */
    result := translate( result, '+/|:=("*-.\'0123456789', 'ABCDEFGHIJKMNOPQRSTUV');
    --tratamento da excessão (0 => EI deve vir após (1/9 => EJ/9
    --result := replace( result, 'FJ','FT');

    --tratamento da exceção "(=" vai depois de ([0-9].
    result := replace( result, 'FE','FW');

    --Trata a excessão quando o termo >= 820 e < 900 o (1/9 => F[KLMNOPQRS] vai depois do . => I (J))
    IF (number>= 82 AND number < 90) OR (number >= 820 and number < 900 )
    THEN
        IF ( (content_v ~ E'^(([0-9]{3})|([0-9]{2}))\\([1-9].*$') OR (content_v ~ E'^(([0-9]{3})|([0-9]{2}))\\.[0-9]{1}\\([1-9].*$') )
        THEN
             resultAux = substring(result FROM position(')' in result));
             result = substring(result FROM 0 FOR position(')' in result));

             result := regexp_replace(result, 'F([NOPQRSTUV])', E'L\\1','g');
             result := result || resultAux;

         END IF;
    END IF;

    -- Substitui o ')' por um caractere de baixa prioridade.
    result = translate( result, ')', '5');

    --adiciona F na frente de cada caracter minusculo a fim de priorizar alguns caracteres
    result := trim( regexp_replace( result,'([a-z])',E'GX\\1','g') );

    --caso tenha complemento concatena
    IF complement IS NOT NULL AND result <> ''
    THEN
        result := result || '@' || complement;
    END IF;

    return result;
END;
$_$;
    ]]>
     </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
DROP TRIGGER gtctgrupdatematerialsontrigger ON gtcmaterial;
UPDATE gtcmaterial SET searchcontentforsearchmodule = searchContent;
-- atualiza as tags 090.a e etc considerando a preferencia MARC_CLASSIFICATION_TAG
UPDATE gtcmaterial EM SET searchcontentforsearchmodule = preparetopographicindexsearch
     ( content,
         ( SELECT content
         FROM gtcmaterial IM
         WHERE fieldid = '090'
             AND subfieldid = 'b'
             AND line = 0
             AND EM.controlnumber = IM.controlNumber
         )
     )
 WHERE fieldid || '.' || subfieldid in (  SELECT regexp_split_to_table( '090.a,080.a', ',' ) );
CREATE TRIGGER gtctgrupdatematerialsontrigger AFTER INSERT OR DELETE OR UPDATE ON gtcmaterial FOR EACH ROW EXECUTE PROCEDURE gtcfncupdatematerialson();
            ]]>
        </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
     <![CDATA[  
    CREATE OR REPLACE FUNCTION preparetopographicindex(content character varying, complement character varying) RETURNS character varying
    LANGUAGE plpgsql
    AS $_$
DECLARE
    result varchar;
    resultAux varchar;
    number integer;
    content_v varchar;

    count int;
    new_content varchar;
    letter char;
BEGIN
    --tira acentos e converte pra minusculas e adiciona | como terminador de string.
    result := lower ( unaccent ( trim( content ) ) ) || '|';

    -- Separa somente números
    new_content := '';
    count := 0;
    number := 0;

    WHILE (count < char_length(content))
    LOOP
        -- Obtém caractere.
        letter := substring(content, count+1, 1);

        -- Testa se caractere é numérico.
        IF letter ~ '^[0-9]$' AND char_length(new_content) < 9
        THEN
            new_content := new_content || letter;
        ELSE
            IF char_length(new_content) > 0
            THEN
                 number := new_content::integer;
                EXIT;
            END IF;
        END IF;

        count = count + 1;
    END LOOP;

    content_v := substring(content from position(number::text in content));

    /**
        Exemplo de precedência que deve ser levado em conta, vide #12268 :
        658.012.4+657 -> + vem primeiro
        658.012.4/.5 -> / vem segundo
        658.012.4 -> Numeros inteiros em terceiro
        658.012.4:266 -> : depois dos números inteiros
    */
    result := translate( result, '+/|:=("*-.\'0123456789', 'ABCDEFGHIJKMNOPQRSTUV');
    --tratamento da excessão (0 => EI deve vir após (1/9 => EJ/9
    --result := replace( result, 'FJ','FT');

    --tratamento da exceção "(=" vai depois de ([0-9].
    result := replace( result, 'FE','FW');

    --Trata a excessão quando o termo >= 820 e < 900 o (1/9 => F[KLMNOPQRS] vai depois do . => I (J))
    IF (number>= 82 AND number < 90) OR (number >= 820 and number < 900 )
    THEN
        IF ( (content_v ~ E'^(([0-9]{3})|([0-9]{2}))\\([1-9].*$') OR (content_v ~ E'^(([0-9]{3})|([0-9]{2}))\\.[0-9]{1}\\([1-9].*$') )
        THEN
             resultAux = substring(result FROM position(')' in result));
             result = substring(result FROM 0 FOR position(')' in result));

             result := regexp_replace(result, 'F([NOPQRSTUV])', E'L\\1','g');
             result := result || resultAux;

         END IF;
    END IF;

    -- Substitui o ')' por um caractere de baixa prioridade.
    result = translate( result, ')', '5');

    --adiciona F na frente de cada caracter minusculo a fim de priorizar alguns caracteres
    result := trim( regexp_replace( result,'([a-z])',E'GX\\1','g') );

    --caso tenha complemento concatena
    IF complement IS NOT NULL AND result <> ''
    THEN
        result := result || '@' || complement;
    END IF;

    return result;
END;
$_$;
      ]]>
        </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
DROP TRIGGER gtctgrupdatematerialsontrigger ON gtcmaterial;
-- atualiza as tags 090.a e etc considerando a preferencia MARC_CLASSIFICATION_TAG
UPDATE gtcmaterial EM SET searchcontent = preparetopographicindex
     ( content,
         ( SELECT content
         FROM gtcmaterial IM
         WHERE fieldid = '090'
             AND subfieldid = 'b'
             AND line = 0
             AND EM.controlnumber = IM.controlNumber
         )
     )
 WHERE fieldid || '.' || subfieldid in (  SELECT regexp_split_to_table( '090.a,080.a', ',' ) );
CREATE TRIGGER gtctgrupdatematerialsontrigger AFTER INSERT OR DELETE OR UPDATE ON gtcmaterial FOR EACH ROW EXECUTE PROCEDURE gtcfncupdatematerialson();
            ]]>
        </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE index index_gtcmaterial_searchcontentforsearchmodule ON gtcmaterial USING btree (controlnumber, searchcontentforsearchmodule);
CREATE index index_gtcmaterial_indice4forsearchmodule ON gtcmaterial USING btree (fieldid, subfieldid, searchcontentforsearchmodule varchar_pattern_ops);
CREATE index index_gtcmaterial_controlnumbersearchforsearchmodule ON gtcmaterial USING btree (controlnumber, fieldid, subfieldid, searchcontentforsearchmodule);
CREATE index index_gtcmaterial_3forsearchmodule ON gtcmaterial USING btree (fieldid, subfieldid, searchcontentforsearchmodule varchar_pattern_ops);
CREATE index index_gtcmaterial_searchcontentforsearchmodule_fulltext ON gtcmaterial USING gin (to_tsvector('portuguese'::regconfig, searchcontentforsearchmodule));
            ]]>
        </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
UPDATE gtcmaterial SET searchcontent = preparesearchcontent(fieldid || '.' || subfieldid, content, ''), searchcontentforsearchmodule = preparesearchcontentforsearchmodule(fieldid || '.' || subfieldid, content, '') WHERE fieldid || '.' || subfieldid IN ('960.d','960.h','960.i','960.y','949.y','949.z','949.h') AND CONTENT LIKE '%/%/%';
            ]]>
        </change>
        <applicationversion>3534</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
select setval('seq_supplierid', (select max(supplierid::int) from gtcsupplier));
            ]]>
        </change>
        <applicationversion>3536</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcSipEquipament (
  sipEquipamentId               varchar(255) NOT NULL, 
  password                      varchar(255), 
  libraryunitid                 int4 NOT NULL, 
  makeLoan                      bool DEFAULT 'f' NOT NULL, 
  makeReturn                    bool DEFAULT 'f' NOT NULL, 
  makeRenew                     bool DEFAULT 'f' NOT NULL, 
  denyUserCard                  bool DEFAULT 'f' NOT NULL, 
  offlineMode                   bool DEFAULT 'f' NOT NULL, 
  timeOutPeriod                 int4, 
  retriesAllow                  int4, 
  locationformaterialmovementid int4 NOT NULL, 
  binDefault                    varchar(255) NOT NULL, 
  screenMessage                 text, 
  printMessage                  text, 
  PRIMARY KEY (sipEquipamentId));
COMMENT ON COLUMN gtcSipEquipament.sipEquipamentId IS 'Código do equipamento Sip';
COMMENT ON COLUMN gtcSipEquipament.password IS 'Senha do equipamento Sip.';
COMMENT ON COLUMN gtcSipEquipament.libraryunitid IS 'Unidade de biblioteca';
COMMENT ON COLUMN gtcSipEquipament.makeLoan IS 'Define se equipamento realiza empréstimo';
COMMENT ON COLUMN gtcSipEquipament.makeReturn IS 'Define se equipamento realiza devolução';
COMMENT ON COLUMN gtcSipEquipament.makeRenew IS 'Define se equipamento realiza renovação';
COMMENT ON COLUMN gtcSipEquipament.denyUserCard IS 'Define se equipamento bloqueia cartão de usuário';
COMMENT ON COLUMN gtcSipEquipament.offlineMode IS 'Define se equipamento trabalha em modo off-line';
COMMENT ON COLUMN gtcSipEquipament.timeOutPeriod IS 'Define o timeout do equipamento';
COMMENT ON COLUMN gtcSipEquipament.retriesAllow IS 'Quantidade de retentativas de conexão';
COMMENT ON COLUMN gtcSipEquipament.locationformaterialmovementid IS 'Define local de circulação de material do equipamento';
COMMENT ON COLUMN gtcSipEquipament.binDefault IS 'Bin padrão para materiais';
COMMENT ON COLUMN gtcSipEquipament.screenMessage IS 'Define a mensagem que aparecerá na tela do equipamento';
COMMENT ON COLUMN gtcSipEquipament.printMessage IS 'Define a mensagem que será impressa';

ALTER TABLE gtcSipEquipament ADD CONSTRAINT gtcsipequipament_libraryunitid_fkey FOREIGN KEY (libraryunitid) REFERENCES public.gtclibraryunit (libraryunitid);

ALTER TABLE gtcSipEquipament ADD CONSTRAINT FKgtcSipEqui824286 FOREIGN KEY (locationformaterialmovementid) REFERENCES public.gtclocationformaterialmovement (locationformaterialmovementid);

CREATE TABLE gtcSipEquipamentLog (
  sipEquipamentLogId serial NOT NULL, 
  sipEquipamentId    varchar(255) NOT NULL, 
  dateTime           timestamp DEFAULT now() NOT NULL, 
  status             char(1) DEFAULT '1' NOT NULL, 
  PRIMARY KEY (sipEquipamentLogId));
COMMENT ON COLUMN gtcSipEquipamentLog.sipEquipamentLogId IS 'Código do log do equipamento sip';
COMMENT ON COLUMN gtcSipEquipamentLog.sipEquipamentId IS 'Código do equipamento sip';
COMMENT ON COLUMN gtcSipEquipamentLog.dateTime IS 'Data e hora do registro';
COMMENT ON COLUMN gtcSipEquipamentLog.status IS 'Status do equipamento
Valores possiveis:
1 - OK
2 - Sem papel
3 - Desligando';

CREATE INDEX index_gtcSipEquipamentLog_sipEquipamentId 
  ON gtcSipEquipamentLog (sipEquipamentId);

ALTER TABLE gtcSipEquipamentLog ADD CONSTRAINT gtcsipequipamentlog_sipequipament_fkey FOREIGN KEY (sipEquipamentId) REFERENCES gtcSipEquipament (sipEquipamentId);

CREATE TABLE gtcSipEquipamentBinRules (
  sipEquipamentId   varchar(255) NOT NULL, 
  exemplarystatusid int4 NOT NULL, 
  bin               varchar(255) NOT NULL, 
  PRIMARY KEY (sipEquipamentId, 
  exemplarystatusid));
COMMENT ON COLUMN gtcSipEquipamentBinRules.sipEquipamentId IS 'Código do equipamento sip
';
COMMENT ON COLUMN gtcSipEquipamentBinRules.exemplarystatusid IS 'Código do estado do exemplar';
COMMENT ON COLUMN gtcSipEquipamentBinRules.bin IS 'Bin para onde exemplar é encaminhado de acordo com o estado do material';

ALTER TABLE gtcSipEquipamentBinRules ADD CONSTRAINT gtcsipequipamentbinrules_sipequipamentid_fkey FOREIGN KEY (sipEquipamentId) REFERENCES gtcSipEquipament (sipEquipamentId);
ALTER TABLE gtcSipEquipamentBinRules ADD CONSTRAINT gtcsipequipamentbinrules_exemplarystatusid_fkey FOREIGN KEY (exemplarystatusid) REFERENCES public.gtcexemplarystatus (exemplarystatusid);
            ]]>
        </change>
        <applicationversion>3543</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcSession (
  sessionId       serial NOT NULL, 
  sipEquipamentId varchar(255) NOT NULL, 
  personid        bigint, 
  isClosed        bool DEFAULT 'f' NOT NULL, 
  PRIMARY KEY (sessionId));
COMMENT ON COLUMN gtcSession.sessionId IS 'Código da sessão';
COMMENT ON COLUMN gtcSession.sipEquipamentId IS 'Código do equipamento sip';
COMMENT ON COLUMN gtcSession.personid IS 'Código da pessoa';
COMMENT ON COLUMN gtcSession.isClosed IS 'Flag para determinar se a sessão está aberta ou fechada';

CREATE INDEX index_gtcSession_sipEquipamentId ON gtcSession (sipEquipamentId);
CREATE INDEX index_gtcSession_personid ON gtcSession (personid);
CREATE INDEX index_gtcSession_isClosed ON gtcSession (isClosed);

ALTER TABLE gtcSession ADD CONSTRAINT gtcsession_personid_fkey FOREIGN KEY (personid) REFERENCES public.basPerson (personid);

ALTER TABLE gtcSession ADD CONSTRAINT gtcsession_sipequipamentid_fkey FOREIGN KEY (sipEquipamentId) REFERENCES gtcSipEquipament (sipEquipamentId);

CREATE TABLE gtcSessionOperation (
  sessionOperationId serial NOT NULL, 
  sessionId          int4 NOT NULL, 
  dateTime           timestamp DEFAULT now() NOT NULL, 
  operation          char(1) NOT NULL, 
  loanid             int4, 
  returnregisterid   int4, 
  renewid            int4, 
  PRIMARY KEY (sessionOperationId));
COMMENT ON COLUMN gtcSessionOperation.sessionOperationId IS 'Código da operação da sessão';
COMMENT ON COLUMN gtcSessionOperation.sessionId IS 'Código da sessão';
COMMENT ON COLUMN gtcSessionOperation.dateTime IS 'Data e hora do registro de operação';
COMMENT ON COLUMN gtcSessionOperation.operation IS 'Código da operação que está sendo realizada
Operação:
1-Empréstimo
2-Renovação';

CREATE INDEX index_gtcSessionOperation_sessionId ON gtcSessionOperation (sessionId);
ALTER TABLE gtcSessionOperation ADD CONSTRAINT gtcsessionoperation_sessionid_fkey FOREIGN KEY (sessionId) REFERENCES gtcSession (sessionId);
ALTER TABLE gtcSessionOperation ADD CONSTRAINT gtcsessionoperation_loanid_fkey FOREIGN KEY (loanid) REFERENCES public.gtcloan (loanid);
ALTER TABLE gtcSessionOperation ADD CONSTRAINT gtcsessionoperation_renewid_fkey FOREIGN KEY (renewid) REFERENCES public.gtcrenew (renewid);
ALTER TABLE gtcSessionOperation ADD CONSTRAINT gtcsessionoperation_returnregisterid_fkey FOREIGN KEY (returnregisterid) REFERENCES public.gtcreturnregister (returnregisterid);
            ]]>
        </change>
        <applicationversion>3543</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         CREATE TABLE gtcSipCirculationStatus (
  sipCirculationStatusId int4 NOT NULL, 
  exemplarystatusid      int4 NOT NULL, 
  PRIMARY KEY (sipCirculationStatusId));
         ALTER TABLE gtcSipCirculationStatus ADD CONSTRAINT gtcsipcirculationstatus_exemplarystatusid_fkey FOREIGN KEY (exemplarystatusid) REFERENCES public.gtcexemplarystatus (exemplarystatusid);
            ]]>
        </change>
        <applicationversion>3552</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         ALTER TABLE gtcinterchange ADD FOREIGN KEY (supplierid) REFERENCES gtcsupplier (supplierid);
            ]]>
        </change>
        <applicationversion>3602</applicationversion>
        <orderchange>1</orderchange>
    </item>
        <item>
        <change>
            <![CDATA[
         UPDATE basperson SET locationtypeid = 35 WHERE locationtypeid is null;
            ]]>
        </change>
        <applicationversion>3602</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         CREATE TABLE basbiometry (
  	 personid bigint NOT NULL, 
         biometry text NOT NULL, 
         key text NOT NULL, 
         PRIMARY KEY (personid));

         ALTER TABLE public.basbiometry ADD CONSTRAINT basbiometry_personid_fkey FOREIGN KEY (personid) REFERENCES public.basPerson (personid);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         alter table basperson add column miolousername varchar(25);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
         CREATE index index_gtcmaterial_only_searchcontentforsearchmodule ON gtcmaterial USING btree (searchcontentforsearchmodule varchar_pattern_ops);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
        <item>
        <change>
            <![CDATA[
	CREATE INDEX index_gtcsearchmaterialview_exemplarylibraryunitid ON gtcsearchmaterialview(exemplarylibraryunitid);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
	CREATE INDEX index_gtcsearchmaterialview_exemplaryoriginallibraryunitidd ON gtcsearchmaterialview(exemplaryoriginallibraryunitid);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
	CREATE SEQUENCE seq_biometrysessionid;
	CREATE TABLE basBiometrySession (
                     sessionId int8 NOT NULL, 
                     return varchar(255), 
                     PRIMARY KEY (sessionId));
        CREATE INDEX basBiometrySession_sessionId 
        ON basBiometrySession (sessionId);
            ]]>
        </change>
        <applicationversion>3701</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcIntegrationServer (
  integrationServerId      serial NOT NULL, 
  nameServer               varchar(255) NOT NULL, 
  hostServer               varchar(255) NOT NULL, 
  emailServer              varchar(100) NOT NULL, 
  nameClient               varchar(255) NOT NULL, 
  emailClient              varchar(100) NOT NULL, 
  "user"                   varchar(100), 
  password                 varchar(255) NOT NULL,
  periodicity              varchar(255),  
  serverWorkflowInstanceId int4, 
  clientWorkflowInstanceId int4, 
  PRIMARY KEY (integrationServerId));

ALTER TABLE gtcIntegrationServer ADD CONSTRAINT gtcintegrationserver_serverworkflowinstanceid_fkey FOREIGN KEY (serverWorkflowInstanceId) REFERENCES public.gtcWorkflowInstance (workflowInstanceId);
 ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcIntegrationClient (
  integrationClientId           serial NOT NULL, 
  hostClient                    varchar(255) NOT NULL, 
  nameClient                    varchar(255) NOT NULL, 
  initialAmountClientMaterials  int4 NOT NULL, 
  initialAmountClientExemplarys int4 NOT NULL, 
  emailClient                   varchar(100) NOT NULL, 
  periodicity                   varchar(255), 
  serverWorkflowInstanceId      int4, 
  clientWorkflowInstanceId      int4,
  PRIMARY KEY (integrationClientId));

ALTER TABLE gtcIntegrationClient ADD CONSTRAINT gtcintegrationclient_clientworkflowinstanceid_fkey FOREIGN KEY (clientWorkflowInstanceId) REFERENCES public.gtcWorkflowInstance (workflowInstanceId);

 ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>2</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcIntegrationServerLog (
  integrationServerLogId  serial NOT NULL, 
  integrationServerId     int4 NOT NULL, 
  materialsSynchronized   int4 NOT NULL, 
  exemplariesSynchronized int4 NOT NULL, 
  "date"                  timestamp NOT NULL, 
  PRIMARY KEY (integrationServerLogId));


ALTER TABLE gtcIntegrationServerLog ADD CONSTRAINT FKintegratio44762 FOREIGN KEY (integrationServerId) REFERENCES gtcIntegrationServer (integrationServerId);
 ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>3</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcIntegrationClientLog (
  integrationClientLogId  serial NOT NULL, 
  integrationClientId     int4 NOT NULL, 
  materialsSyncronized    int4 NOT NULL, 
  exemplariesSinchronized int4 NOT NULL, 
  "date"                  timestamp NOT NULL, 
  PRIMARY KEY (integrationClientLogId));

ALTER TABLE gtcIntegrationClientLog ADD CONSTRAINT FKgtcIntegra234376 FOREIGN KEY (integrationClientId) REFERENCES gtcIntegrationClient (integrationClientId);

 ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>4</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcintegrationLibrary (
  integrationLibraryId serial NOT NULL, 
  integrationServerId  int4 NOT NULL, 
  libraryunitid        int4 NOT NULL, 
  PRIMARY KEY (integrationLibraryId));

ALTER TABLE gtcintegrationLibrary ADD CONSTRAINT FKgtcintegra727571 FOREIGN KEY (libraryunitid) REFERENCES public.gtclibraryunit (libraryunitid);

ALTER TABLE gtcintegrationLibrary ADD CONSTRAINT FKgtcintegra336144 FOREIGN KEY (integrationServerId) REFERENCES gtcIntegrationServer (integrationServerId);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcmaterialsearchformat (
  controlnumber  int4 NOT NULL, 
  searchformatid int4 NOT NULL, 
  searchformat   text, 
  detailformat   text, 
  "date"         timestamp NOT NULL, 
  PRIMARY KEY (controlnumber, 
  searchformatid));
CREATE INDEX gtcmaterialsearchformat_controlnumber 
  ON gtcmaterialsearchformat (controlnumber);
CREATE INDEX gtcmaterialsearchformat_searchformatid 
  ON gtcmaterialsearchformat (searchformatid);

ALTER TABLE gtcmaterialsearchformat ADD CONSTRAINT gtcmaterialsearchformat_controlnumber_fkey FOREIGN KEY (controlnumber) REFERENCES public.gtcmaterialcontrol (controlnumber);

ALTER TABLE gtcmaterialsearchformat ADD CONSTRAINT gtcmaterialsearchformat_searchformatid_fkey FOREIGN KEY (searchformatid) REFERENCES public.gtcsearchformat (searchformatid);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcsearchformat ADD COLUMN date timestamp DEFAULT now();
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>2</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
UPDATE gtcsearchformat set date = now();
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
ALTER TABLE gtcsearchformat ALTER COLUMN date set not null;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>3</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcreport_old (
    reportid character varying(20) NOT NULL,
    title character varying NOT NULL,
    description text,
    permission character varying NOT NULL,
    reportsql text,
    reportsubsql text,
    script text,
    model character varying,
    isactive boolean NOT NULL,
    reportgroup character varying
);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
INSERT INTO gtcreport_old (SELECT * FROM gtcreport);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>2</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
CREATE TABLE gtcreportparameter_old (
    reportparameterid integer NOT NULL,
    reportid character varying(20) NOT NULL,
    label character varying NOT NULL,
    identifier character varying NOT NULL,
    type character varying NOT NULL,
    defaultvalue character varying,
    options text,
    lastvalue character varying,
    level integer
);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
   <item>
        <change>
            <![CDATA[
INSERT INTO gtcreportparameter_old (SELECT * FROM gtcreportparameter);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>2</orderchange>
    </item>
   <item>
        <change>
            <![CDATA[
ALTER TABLE gtcsearchablefield ADD COLUMN filtertype int not null default 1;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
UPDATE basconfig SET value='A = 01/01;30/06;30 B = 01/07;31/12;30', description='Determina os peridos validos das requisições; Pode ser definido N periodos.  Exemplos: A = 01/01;30/06;30 B = 01/07;31/12;30' where parameter='REQUEST_CHANGE_EXEMPLARY_STATUS_SEMESTER_PERIOD';
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
             ALTER TABLE gtcsipcirculationstatus DROP CONSTRAINT gtcsipcirculationstatus_pkey;   
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
             alter table gtcsipequipament add column description varchar(255);
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>1</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
              update gtcsipequipament set description = 'Equipamento sip';
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>2</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
             alter table gtcsipequipament alter COLUMN  description set not null;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>3</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            ALTER TABLE gtcsipequipament ADD column requiredpassword boolean NOT NULL DEFAULT 't';
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>4</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            ALTER TABLE gtcsipcirculationstatus DROP CONSTRAINT gtcsipcirculationstatus_exemplarystatusid_fkey;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item> 
    
    <item>
        <change>
            <![CDATA[
            ALTER TABLE gtcsipequipament ADD column psLoanlimit boolean not null DEFAULT false;
           ]]>
           </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item> 
   <item>
        <change>
            <![CDATA[
           ALTER TABLE gtcsipequipament ADD column psOverduelimit boolean not null DEFAULT false;
            ]]>
           </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item> 
    <item>
        <change>
            <![CDATA[
           ALTER TABLE gtcsipequipament ADD column psPenaltylimit boolean not null DEFAULT false;
           ]]>
           </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item> 
    <item>
        <change>
            <![CDATA[
           ALTER TABLE gtcsipequipament ADD column psFinelimit boolean not null DEFAULT false;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>5</orderchange>
    </item> 
    <item>
        <change>
            <![CDATA[
           CREATE SEQUENCE seq_nextworknumber;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>6</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
           SELECT setval('seq_nextworknumber', MAX(content::integer)) FROM gtcmaterial WHERE fieldid = '950' AND subfieldid = 'a' AND content ~'^[0-9]*$';
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>7</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
           UPDATE basperson SET zipcode = replace(zipcode, '-', '');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>8</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            ALTER TABLE basperson ALTER COLUMN datein SET default now()::date;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>9</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com gtcoperation.
            CREATE SEQUENCE seq_gtcoperation_operationid;
            SELECT SETVAL('seq_gtcoperation_operationid', (SELECT max(operationid) FROM gtcoperation));
            ALTER TABLE gtcoperation ALTER COLUMN operationid SET DEFAULT nextval('seq_gtcoperation_operationid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>10</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com acdInterchange.
            CREATE SEQUENCE seq_gtcinterchange_interchangeid;
            SELECT SETVAL('seq_gtcinterchange_interchangeid', (SELECT max(interchangeid) FROM gtcinterchange));
            ALTER TABLE gtcinterchange ALTER COLUMN interchangeid SET DEFAULT nextval('seq_gtcinterchange_interchangeid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>11</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com acdInterchangeTypeId.
            CREATE SEQUENCE seq_gtcinterchangetype_interchangetypeid;
            SELECT SETVAL('seq_gtcinterchangetype_interchangetypeid', (SELECT max(interchangetypeid) FROM gtcinterchangetype));
            ALTER TABLE gtcinterchangetype ALTER COLUMN interchangetypeid SET DEFAULT nextval('seq_gtcinterchangetype_interchangetypeid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>12</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com basReportParameter.
            CREATE SEQUENCE seq_gtcreportparameter_reportparameterid;
            SELECT SETVAL('seq_gtcreportparameter_reportparameterid', (SELECT max(reportparameterid) FROM gtcreportparameter));
            ALTER TABLE gtcreportparameter ALTER COLUMN reportparameterid SET DEFAULT nextval('seq_gtcreportparameter_reportparameterid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>13</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com supplier.
            CREATE SEQUENCE seq_gtcsupplier_supplierid;
            SELECT SETVAL('seq_gtcsupplier_supplierid', (SELECT max(supplierid) FROM gtcsupplier));
            ALTER TABLE gtcsupplier ALTER COLUMN supplierid SET DEFAULT nextval('seq_gtcsupplier_supplierid');
            ALTER TABLE gtcsuppliertypeandlocation ALTER COLUMN supplierid SET DEFAULT nextval('seq_gtcsupplier_supplierid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>14</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            UPDATE basconfig SET value = $$<div style='text-align:right;font-size:9px;margin-top:8px;'>
<strong>SOLIS - Cooperativa de Soluções Livres</strong><br/>
Av. Avelino Tallini, 171, Prédio 20, Sala 500<br/>
Parque Científico e Tecnológico Tecnovates<br/>
Bairro Universitário - Lajeado/RS<br/>
Fone: +55 51 3714-7043<br/>
<a href='mailto:negocios@solis.coop.br'>negocios@solis.coop.br<a/>
</div>$$ WHERE parameter = 'SEARCH_THEME_FOOTER' AND value ilike '%sete de setembro%';
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>15</orderchange>
    </item>
    <item> 
        <change>
            <![CDATA[
            --Conflito com supplier.
            CREATE SEQUENCE seq_gtcsupplier_supplierid;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>16</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com supplier.
            SELECT SETVAL('seq_gtcsupplier_supplierid', (SELECT max(supplierid) FROM gtcsupplier));
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>17</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com supplier.
            ALTER TABLE gtcsupplier ALTER COLUMN supplierid SET DEFAULT nextval('seq_gtcsupplier_supplierid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>14</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com supplier.
            ALTER TABLE gtcsuppliertypeandlocation ALTER COLUMN supplierid SET DEFAULT nextval('seq_gtcsupplier_supplierid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>18</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com gtcoperation.
            CREATE SEQUENCE seq_gtcoperation_operationid;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>19</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com gtcoperation.
            SELECT SETVAL('seq_gtcoperation_operationid', (SELECT max(operationid) FROM gtcoperation));
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>20</orderchange>
    </item>
    <item>
        <change>
            <![CDATA[
            --Conflito com gtcoperation.
            ALTER TABLE gtcoperation ALTER COLUMN operationid SET DEFAULT nextval('seq_gtcoperation_operationid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>21</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com acdInterchange.
            CREATE SEQUENCE seq_gtcinterchange_interchangeid;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>22</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com acdInterchange.
            SELECT SETVAL('seq_gtcinterchange_interchangeid', (SELECT max(interchangeid) FROM gtcinterchange));
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>23</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com acdInterchange.
            ALTER TABLE gtcinterchange ALTER COLUMN interchangeid SET DEFAULT nextval('seq_gtcinterchange_interchangeid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>24</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com basReportParameter.
            CREATE SEQUENCE seq_gtcreportparameter_reportparameterid;
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>25</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com basReportParameter.
            SELECT SETVAL('seq_gtcreportparameter_reportparameterid', (SELECT max(reportparameterid) FROM gtcreportparameter));
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>26</orderchange>
    </item>
     <item>
        <change>
            <![CDATA[
            --Conflito com basReportParameter.
            ALTER TABLE gtcreportparameter ALTER COLUMN reportparameterid SET DEFAULT nextval('seq_gtcreportparameter_reportparameterid');
            ]]>
        </change>
        <applicationversion>3801</applicationversion>
        <orderchange>27</orderchange>
    </item>
</dbchanges>