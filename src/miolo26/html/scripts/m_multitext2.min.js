dojo.declare("Miolo.MultiTextField2",null,{mtfName:"",constructor:function(e){this.mtfName=e,this.leftSeparator="[",this.rightSeparator="]",this.separator=this.rightSeparator+" "+this.leftSeparator,this.emptyField=this.leftSeparator+this.rightSeparator},onSubmit:function(){var e=miolo.getElementById(this.mtfName+this.emptyField);if(null!=e&&null!=e.options)for(var t=0;t<e.length;t++)e.options[t].value=e.options[t].text,e.options[t].selected=!0;return!0},split:function(e){return e.substring(1,e.length-1).split(this.separator)},join:function(e){for(var t=this.leftSeparator,i=0;i<e.length;i++)i>0&&(t+=this.separator),t+=e[i];return t+=this.rightSeparator},onKeyDown:function(e,t,i,o,n){var l=null!=document.all?o.keyCode:o.which,s=i+"_text",r=s.length;if(e.name.substring(0,r)==s){if(13==l)return this.add(t,i,n),!1}else if(e.name==i+this.emptyField&&46==l)return this.remove(t,i,n),!1},onSelect:function(e){var t=miolo.getElementById(this.mtfName+this.emptyField),i=t.selectedIndex;if(-1!=i)for(var o=this.split(t.options[i].text),n=1;e>=n;n++){var l=miolo.getElementById(this.mtfName+"_text"+n);if(null!=l)l.value=o[n-1];else{var s=miolo.getElementById(this.mtfName+"_options"+n);if(null!=s)for(var r=0;r<s.options.length;r++)if(s.options[r].text==o[n-1]){s.selectedIndex=r;break}}}else for(var n=1;e>=n;n++){var l=miolo.getElementById(this.mtfName+"_text"+n);if(null!=l)l.value="";else{var s=miolo.getElementById(this.mtfName+"_options"+n);null!=s&&(s.selectedIndex=-1)}}},getInput:function(e){for(var t=miolo.getElementById(this.mtfName+this.emptyField),i=new Array(e),o=1;e>=o;o++){var n=miolo.getElementById(this.mtfName+"_text"+o);if(i[o-1]="",null!=n)i[o-1]=n.value;else{var t=miolo.getElementById(this.mtfName+"_options"+o);null!=t&&(i[o-1]=t.options[t.selectedIndex].text)}}return this.join(i)},add:function(e){var t=miolo.getElementById(this.mtfName+this.emptyField),i=t.length;t.options[i]=new Option(this.getInput(e)),t.selectedIndex=i},remove:function(){for(var e=miolo.getElementById(this.mtfName+this.emptyField),t=0;t<e.length;t++)if(e.options[t].selected){e.options[t]=null,t>=e.length&&(t=e.length-1),t>=0&&(e.options[t].selected=!0);break}},modify:function(e){var t=miolo.getElementById(this.mtfName+this.emptyField),i=t.selectedIndex;-1!=i?t.options[i].text=this.getInput(e):alert("Ã preciso selecionar o item a ser modificado!")},moveUp:function(){var e=miolo.getElementById(this.mtfName+this.emptyField),t=e.selectedIndex;if(-1!=t){if(t>0){var i=e.options[t-1].text;e.options[t-1].text=e.options[t].text,e.options[t-1].selected=!0,e.options[t].text=i,e.options[t].selected=!1,e.selectedIndex=t-1}}else alert("Ã preciso selecionar o item a ser modificado!")},moveDown:function(){var e=miolo.getElementById(this.mtfName+this.emptyField),t=e.selectedIndex;if(-1!=t){if(t<e.options.length-1){var i=e.options[t+1].text;e.options[t+1].text=e.options[t].text,e.options[t+1].selected=!0,e.options[t].text=i,e.options[t].selected=!1,e.selectedIndex=t+1}}else alert("Ã preciso selecionar o item a ser modificado!")}});