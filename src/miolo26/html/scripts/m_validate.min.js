dojo.declare("Miolo.validate",null,{constructor:function(){this.validators=new Array},add:function(r){this.validators.push(r)},errors:"",on:!0,process:function(){if(!this.on)return!0;for(var r="",a=0,e=null,t=0;t<this.validators.length;t++){var i=this.validate(this.validators[t]);null!=i&&""!=i&&(""!=r&&(r+="\n"),r+="- "+i,null==e&&(e=miolo.getElementById(this.validators[t].field)),a++)}if(""!=r&&(r=a>1?miolo.i18n.ERRORS_DETECTED+":\n"+r:miolo.i18n.ERROR_DETECTED+":\n"+r,alert(r),null!=e))try{e.focus()}catch(i){}return""==r},validate:function(validator){if("ignore"==validator.type)return null;var req="",field=miolo.getElementById(validator.field),value=field.value;null==value&&(value=dijit.byId(validator.field).getValue());var error=null,param="";if("required"==validator.type&&(req="yes"),""!=req&&0==value.length&&(error=miolo.translate("FIELD_IS_REQUIRED",{field:validator.label})),(""!=req||value.length>0)&&value.length<validator.min&&(error=miolo.translate("VALIDATE_MIN",{field:validator.label,min:validator.min})),validator.max>0&&value.length>validator.max&&(error=miolo.translate("VALIDATE_MAX",{field:validator.label,min:validator.max})),"ALL"!=validator.chars)for(var i=0;i<value.length;i++){var c=value.charAt(i);-1==validator.chars.indexOf(c)&&(error=miolo.translate("INVALID_CHAR",{character:c,field:validator.label}))}if((value.length>0||""!=req)&&""!=validator.mask)if(value.length!=validator.mask.length)error=miolo.translate("VALIDATE_LENGTH",{field:validator.label,length:validator.mask.length});else for(var i=0;i<value.length;i++){var m=validator.mask.charAt(i),c=value.charAt(i);"9"==m?("0">c||c>"9")&&(error=miolo.translate("VALIDATE_NUM_POSITION",{field:validator.label,index:i+1})):"a"!=m&&m!=c&&(error=miolo.translate("VALIDATE_CHAR_POSITION",{field:validator.label,character:c,index:i+1}))}return(value.length>0||""!=req)&&null==error&&""!=validator.checker&&(param="(value)","password"==validator.id&&(param="(value)"),"compare"==validator.id&&(param="(value, validator.operator, validator.value, validator.datatype)"),"range"==validator.id&&(param="(value, validator.minvalue, validator.maxvalue, validator.datatype)"),"regexp"==validator.id&&(param="(value, validator.regexp)"),eval("this.check_"+validator.checker+param)||(error=miolo.translate("INVALID_FIELD_CONTENT",{field:validator.label}))),null!=error&&""!=validator.msgerr&&(error=validator.msgerr),error},check_MASK:function(r,a){var e=MIOLO_GetElementById(r.field),t=e.value,i=r.mask;if(0==t.length)for(var n=0;n<i.length;){var l=i.charAt(n++);if("9"==l||"a"==l)break;t+=l}if(null!=a){var s=a.which?a.which:a.keyCode,o=String.fromCharCode(s);if(!(""!=o&&o>=" "&&37!=s))return!0;r.max>0&&t.length>r.max-1&&(t=t.substring(0,r.max-1)),t+=o;for(var n=t.length;n<i.length;){var l=i.charAt(n++);if("9"==l||"a"==l)break;t+=l}}return e.value=t,!1},isDigit:function(r){return-1!="0123456789".indexOf(r)},returnNumbers:function(r){for(var a="",e=0;e<r.length;e++){var t=r.charAt(e);this.isDigit(t)&&(a+=t)}return a},check_PASSWORD:function(r){return r==r.replace(" ","")},check_COMPARE:function(value,operator,basevalue,datatype){var exp="";return exp="i"==datatype?value+" "+operator+" "+basevalue:"'"+value+"' "+operator+" '"+basevalue+"'",eval(exp)},check_RANGE:function(value,min,max,datatype){var exp="false",pos1,pos2,sD1,sD2,sD3,sM1,sM2,sM3,sY1,sY2,sY3;if("i"==datatype)exp="("+value+" >= "+min+") && ("+value+" <= "+max+")";else if("s"==datatype)exp="('"+value+"' >= '"+min+"') && ('"+value+"' <= '"+max+"')";else if("d"==datatype&&(pos1=value.indexOf("/"),pos2=value.indexOf("/",pos1+1),sD1=value.substring(0,pos1),sM1=value.substring(pos1+1,pos2),sY1=value.substring(pos2+1),this.isDate(sM1+"/"+sD1+"/"+sY1)&&(pos1=min.indexOf("/"),pos2=min.indexOf("/",pos1+1),sD2=min.substring(0,pos1),sM2=min.substring(pos1+1,pos2),sY2=min.substring(pos2+1),this.isDate(sM2+"/"+sD2+"/"+sY2)&&(pos1=max.indexOf("/"),pos2=max.indexOf("/",pos1+1),sD3=max.substring(0,pos1),sM3=max.substring(pos1+1,pos2),sY3=max.substring(pos2+1),this.isDate(sM3+"/"+sD3+"/"+sY3))))){var dt1=new Date(sY1,sM1-1,sD1),dt2=new Date(sY2,sM2-1,sD2),dt3=new Date(sY3,sM3-1,sD3);exp=dt1>=dt2&&dt3>=dt1}return eval(exp)},check_REGEXP:function(r,a){return r.search(a)>=0},check_CNPJ:function(r){if(r=this.returnNumbers(r),14==r.length&&"00000000000000"!=r){var a=r.length-2;if(1==this.verify_CNPJ(r,a)&&(a=r.length-1,1==this.verify_CNPJ(r,a)))return!0}return!1},verify_CNPJ:function(r,a){var e=0,t=2;for(f=a;f>0;f--)e+=parseInt(r.charAt(f-1))*t,t>8?t=2:t++;return e%=11,e=0==e||1==e?0:11-e,e!=parseInt(r.charAt(a))?0:1},check_CPF:function(r){var a,e=0,t=0,i=0,n=0,l="",s="",o="",o=this.returnNumbers(r);if("00000000000"==o||"11111111111"==o||"22222222222"==o||"33333333333"==o||"44444444444"==o||"55555555555"==o||"66666666666"==o||"77777777777"==o||"88888888888"==o||"99999999999"==o)return!1;if(11!=o.length)return!1;len=o.length,e=len-1;for(var a=0;len-3>=a;a++)y=o.substring(a,a+1),t+=y*e,e-=1,l+=y;i=11-t%11,10==i&&(i=0),11==i&&(i=0),s=o.substring(0,len-2)+i,e=11,t=0;for(var a=0;len-2>=a;a++)t+=s.substring(a,a+1)*e,e-=1;return n=11-t%11,10==n&&(n=0),11==n&&(n=0),i+""+n==o.substring(len,len-2)?!0:!1},check_EMAIL:function(r){var a=/^(([a-zA-Z0-9/=?^_`{|}~!#$%&'*+-]+(\.[a-zA-Z0-9/=?^_`{|}~!#$%&'*+-]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.match(a)},check_DATEDMY:function(r){var a=r.indexOf("/"),e=r.indexOf("/",a+1),t=r.substring(0,a),i=r.substring(a+1,e),n=r.substring(e+1);return 1==this.isDate(i+"/"+t+"/"+n)},check_DATEYMD:function(r){var a=r.indexOf("/"),e=r.indexOf("/",a+1),t=r.substring(0,a),i=r.substring(a+1,e),n=r.substring(e+1);return 1==this.isDate(i+"/"+n+"/"+t)},check_DATETimeDMY:function(r){return r=r.split(" "),this.check_DATEDMY(r[0])&&this.check_TIME(r[1])},check_TIME:function(r){var a=parseInt(r.substring(0,2)),e=parseInt(r.substring(3,5));return a>=0&&24>a&&e>=0&&60>e},isInteger:function(r){var a;for(a=0;a<r.length;a++){var e=r.charAt(a);if("0">e||e>"9")return!1}return!0},stripCharsInBag:function(r,a){var e,t="";for(e=0;e<r.length;e++){var i=r.charAt(e);-1==a.indexOf(i)&&(t+=i)}return t},daysInFebruary:function(r){return r%4!=0||r%100==0&&r%400!=0?28:29},DaysArray:function(r){for(var a=1;r>=a;a++)this[a]=31,(4==a||6==a||9==a||11==a)&&(this[a]=30),2==a&&(this[a]=29);return this},isDate:function(r){dtCh="/",minYear=1900,maxYear=2100;var a=this.DaysArray(12),e=r.indexOf(dtCh),t=r.indexOf(dtCh,e+1),i=r.substring(0,e),n=r.substring(e+1,t),l=r.substring(t+1),s=l;"0"==n.charAt(0)&&n.length>1&&(n=n.substring(1)),"0"==i.charAt(0)&&i.length>1&&(i=i.substring(1));for(var o=1;3>=o;o++)"0"==s.charAt(0)&&s.length>1&&(s=s.substring(1));var u=parseInt(i),v=parseInt(n),d=parseInt(s);return-1==e||-1==t?miolo.translate("DATE_FORMAT",{format:"mm/dd/yyyy"}):n.length<1||1>v||v>31||2==u&&v>this.daysInFebruary(d)||v>a[u]?miolo.i18n.INVALID_DAY:i.length<1||1>u||u>12?miolo.i18n.INVALID_MONTH:4!=l.length||0==d||minYear>d||d>maxYear?miolo.translate("INVALID_YEAR",{min:minYear,max:maxYear}):-1!=r.indexOf(dtCh,t+1)||0==this.isInteger(this.stripCharsInBag(r,dtCh))?miolo.i18n.INFORM_A_VALID_DATE:!0},check_Required:function(r){return r.length>0?!0:!1}});