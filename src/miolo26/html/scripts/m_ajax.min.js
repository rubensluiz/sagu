var urlFileUpload="fileUpload.php";dojo.declare("Miolo.Ajax",null,{loading:'<img src="images/loading.gif" border="0" alt="">',url:null,form:null,response_type:"JSON",updateElement:null,parameters:null,content:null,remote_method:"",constructor:function(o){o.url&&(this.url=o.url),o.form&&(this.form=o.form),o.content&&(this.content=o.content),o.response_type&&(this.response_type=o.response_type),o.updateElement&&(this.updateElement=o.updateElement),o.parameters&&(this.parameters=o.parameters),o.remote_method&&(this.remote_method=o.remote_method),o.callback_function&&(this.callback_function=o.callback_function)},update:function(o){miolo.getElementById(this.updateElement).innerHTML=o,miolo.stopShowLoading()},error:function(o,e){(errDiv=miolo.getElementById("stdout"))&&(errDiv.innerHTML=e.xhr.responseText),miolo.stopShowLoading();var t=document.getElementById("divErroConexao");null!==t&&(t.style.display="block",t.style.marginTop="55px",t.style.marginBottom="-50px",t.className="mMessage mMessageError",t.innerHTML=0===o.status?"<strong>Ocorreu um erro ao tentar receber a resposta do servidor. Verifique sua conexão com a internet.<br/></strong>":500===o.status?"<strong>Erro (código 500): Ocorreu um erro no servidor. Por favor, tente novamente. Caso o problema persista, contate a equipe de suporte da SOLIS.<br/></strong>":"<strong>Ocorreu um erro inesperado. Por favor, tente novamente. Caso o problema persista, contate a equipe de suporte da SOLIS.<br/></strong>",window.scrollTo(0,0))},load:function(){miolo.stopShowLoading()},ioerror:function(o,e){},call:function(){miolo.showLoading();var o=this.response_type.toLowerCase();miolo.getElementById("__ISAJAXCALL")&&miolo.setElementValueById("__ISAJAXCALL","yes"),miolo.getElementById("cpaint_response_type")&&miolo.setElementValueById("cpaint_response_type",o),this.updateElement&&this.update(this.loading);var e=this.callback_function?this.callback_function:this.update;if(null!=this.form){this.content.cpaint_response_type=o;var t=miolo.getURLParameters(miolo.webForm.getAction());"yes"==miolo.page.fileUpload&&"lookup"!=t.action?dojo.io.iframe.send({url:urlFileUpload,form:this.form,method:"post",content:this.content,timeoutSeconds:5,preventCache:!0,error:this.ioerror,handleAs:"json",handle:function(o){"true"==o.uploaded&&o.uploadInfo?(this.content.uploadInfo=o.uploadInfo,this.content.uploadErrors=o.uploadErrors):o.uploadErrors&&(this.content.uploadErrors=o.uploadErrors),miolo.page.fileUpload="no",this.content.__ISFILEUPLOAD="no",dojo.xhrPost({form:this.form,content:this.content,error:this.error,load:function(){miolo.stopShowLoading()},handleAs:"json",handle:e})}}):dojo.xhrPost({form:this.form,content:this.content,error:this.error,load:this.load,handleAs:"json",handle:e})}else{var r=this.url?this.url:miolo.getCurrentURL(),n={};null!=this.parameters&&(dojo.isFunction(this.parameters)?(n=this.parameters(),dojo.isObject(n)||(n={__EVENTARGUMENT:n})):n=this.parameters),n.__ISAJAXCALL="yes",n.__EVENTTARGETVALUE=this.remote_method,"object"==o&&(o="json"),n.cpaint_response_type=o,dojo.xhrPost({updateElement:this.updateElement,url:r,content:n,error:this.error,load:this.load,handleAs:o,handle:e})}}});