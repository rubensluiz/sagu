dojo.declare("MDualList",null,{add:function(o,i,e){var t=dojo.byId(o),n=dojo.byId(i);this.toggleSelectedElements(t,n),this.updateMainList(e,i)},remove:function(o,i,e){var t=dojo.byId(o),n=dojo.byId(i);this.toggleSelectedElements(n,t),this.updateMainList(e,i)},toggleSelectedElements:function(o,e){for(i=o.options.length-1;i>=0;i--)item=o.options.item(i),item.selected&&(e.options.add(dojo.clone(item)),o.options.remove(i));var t=dojo.byId(o.id+"_counter");if(t){var n=dojo.byId(e.id+"_counter");t.innerHTML=o.options.length,n.innerHTML=e.options.length}},moveUp:function(o,e){var t=dojo.byId(o);for(i=t.options.length-1;i>=0;i--)if(item=t.options.item(i),item.selected&&0!=i){upperItem=dojo.clone(t.options.item(i-1)),t.options[i-1]=dojo.clone(item),t.options[i-1].selected=!0,t.options[i]=upperItem;break}this.updateMainList(e,o)},moveDown:function(o,e){var t=dojo.byId(o);for(i=0;i<t.options.length;i++)if(item=t.options.item(i),item.selected&&i!=t.options.length-1){downerItem=dojo.clone(t.options.item(i+1)),t.options[i+1]=dojo.clone(item),t.options[i+1].selected=!0,t.options[i]=downerItem;break}this.updateMainList(e,o)},updateMainList:function(o,i){var e=dojo.byId(i),t=dojo.clone(e);t.id=o,t.name=o+"[]",this.selectAll(t),dojo.byId(o+"_div").innerHTML="",dojo.byId(o+"_div").appendChild(t)},selectAll:function(o){for(i=o.options.length-1;i>=0;i--)o.options.item(i).selected=!0}}),mduallist=new MDualList;